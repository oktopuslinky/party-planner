<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Oswald&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="{{url_for('static', filename='styles.css')}}">
    </head>

    <body>
        <a href="{{url_for('back')}}"><div style='width: 5%; left: 1%; position: absolute; border-color: darkcyan;'>‚Üê BACK</div></a>
        <h1>Ambience</h1>
        
            <div class='lighting'>
                <h3>LIGHTING</h3>
                <h4>What type of lighting do you want? Regular lighting on the ceiling, or something more snazzy like a disco ball?</h4>
                <input type='text' name='lighting' id='lighting' placeholder='Write types of lighting here'>
            </div>
            <div class='decorations'>
                <h3>DECORATIONS</h3>
                <h4>What are you going to use to decorate the party venue?</h4>
                <input type='text' name='decorations' id='decorations' placeholder='Write the decorations that will be done'>
            </div>
            <div class='music'>
                <h3>MUSIC</h3>
                <h4>Do you have a playlist yet? What music will the playlist have?</h4>
                <input type='text' name='music' id='music' placeholder='Write the songs of the playlist here'>
            </div>
            <div class='entertainment'>
                <h3>ENTERTAINMENT</h3>
                <h4>What will there be for entertainment? Will there be stations, or something else?</h4>
                <input type='text' name='entertainment' id='entertainment' placeholder='Write the forms of entertainment'>
            </div>
            <div style='margin-top: 1%; border-bottom-style: hidden;'><button onclick='submit()'>SUBMIT</button></div>
        

        <script>
            /*
            var classname = document.getElementsByClassName("inputs");
            for (var i = 0; i < classname.length; i++) {
                classname[i].addEventListener('input', validation, false);
            }

            var validation = function(){
                console.log('asdf')
                var id=this.id;
                var myInput = document.getElementById(id);
                if (myInput && myInput.value) {
                    alert("My input has a value!");
                }
            }
            */
            /*
            const input = document.querySelector('input')
            input.addEventListener('input', evt => {
                cls = event.target.className;
                $('.'+cls).prop('class', true);
                console.log($('.'+cls).attr('class'));
            })
            */
            document.getElementById("lighting").value = "{{ posts[0].inputVal }}";
            document.getElementById("decorations").value = "{{ posts[1].inputVal }}";
            document.getElementById("music").value = "{{ posts[2].inputVal }}";
            document.getElementById("entertainment").value = "{{ posts[3].inputVal }}";

            console.log("{{ posts[0].inputval }}")

            var elements=["lighting", "decorations", "music", "entertainment"];
            for(el of elements){
                var value=$("#"+el).val();
                if(value == ''){
                    $('.'+el).css('background-color', 'orangered');
                } else if(value){
                    $('.'+el).css('background-color', 'palegreen');
                } else{
                    console.log('undefined value')
                }
                
            }


            function submit(){
                /*
                var data={
                    "food": $('#food').attr('class'),
                    "drinks": $('#drinks').attr('class')
                };
                $.ajax({
                    url:'/postmethod',
                    javascript_data: data,
                    method: 'POST',
                    dataType: 'JSON'
                });
            */   
                var lighting='#lighting';
                var decorations='#decorations';
                var music='#music';
                var entertainment='#entertainment';

                var elements=[lighting, decorations, music, entertainment];
                //var i=0; i<elements.length; i++
                for(i in elements){
                    var value=$(elements[i]).val();
                    if (value == ''){
                        $(elements[i]).addClass('False');
                    } else if(value){
                        $(elements[i]).addClass('True');
                    } else {
                        console.log('undefined value');
                    }
                    console.log($(elements[i]).attr('class'));
                }
                //console.log($('#drinks').attr('class'));
                var obj={
                    "lighting": $('#lighting').attr('class'),
                    "decorations": $('#decorations').attr('class'),
                    "music": $('#music').attr('class'),
                    "entertainment": $('#entertainment').attr('class'),

                    "lightingText": $('#lighting').val(),
                    "decorationsText": $('#decorations').val(),
                    "musicText": $('#music').val(),
                    "entertainmentText": $('#entertainment').val()
                };
                console.log(obj);
                /*
                success: function(){
                        window.location=url;
                    }
                */
                $.ajax({
                    url: '/processAmbience',
                    data: obj,
                    method: 'POST',
                    success: function(){
                        window.location='/';
                    }
                });
                //window.location = "/ambience";
            }
            
        </script>
        <!--
        <form action='/categories' method='POST'>
            {% for post in posts %}
                <div>{{post.desc}}</div>
                <input type="checkbox" name='{{post.id}}' id='{{post.id}}' value='request.form.{{post.id}}' onclick='updateVal()'>
                <label for='{{post.id}}'><input type="text" name='text-input'></label>

                <script>
                    //$("#{{post.id}}").prop('name', '{{post.id}}');
                    console.log($("input[id='{{post.id}}']").val());
                    console.log('{{post.id}}'+$('#{{post.id}}').attr('name'));
                    //False='False';
                    //True='True';
                    var currPost="{{post.checked}}";
                    if (currPost=="True"){
                        $("#{{post.id}}").prop('checked', "True");
                        $("#{{post.id}}").prop('value', "True");

                    } else if(currPost=="False"){
                        $("#{{post.id}}").removeAttr('checked');
                        $("#{{post.id}}").prop('value', "False");
                    } else{
                        console.log("undefined")
                    }
                    console.log('{{post.id}}'+$('#{{post.id}}').attr('value'));
                </script>
            
            {% endfor %}
            <script>
                function updateVal(){
                    //console.log('updateVal');
                    False='False';
                    True='True';
                    currId=event.target.id;
                    console.log('#'+currId);
                    currChecked=$("#"+currId).val();
                    console.log(currChecked);
                    
                    if (currChecked==True){
                        var newVal='False';
                    } else if (currChecked==False) {
                        var newVal='True';
                    } else{
                        console.log('undefined');
                    }
                    $("#"+currId).prop('value', newVal);
                    console.log(newVal);
                    console.log(currId+$('#'+currId).attr('value'));
                }
                //$("input").click(updateVal());
            </script>
            <input type="submit">

        </form>
        -->
        {% for message in get_flashed_messages() %}
            {{ message }}
        {% endfor %}


        <!--
        <p id='display'></p>

        <script>
            console.log('working');
            fetch('/ambience').then(response => {
                console.log(response); 
            })

            function serial(){
                console.log(form.serialize());
                event.preventDefault();
            }
        </script>
        -->
    </body>
</html>